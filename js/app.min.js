function parse(){chrome.storage.local.get(function(a){var d,e,b=[],c=a.s.split("#"),f={hur:{id:"hur",source:"http://www.hurriyet.com.tr/rss/"+c[1],data:"item",title:"title",description:"description",link:"link"},ntv:{id:"ntv",source:"http://www.ntv.com.tr/"+c[1]+".rss",data:"entry",title:"title",description:"summary",image:"content",link:"link"},cnn:{id:"cnn",source:"http://www.cnnturk.com/feed/rss/"+c[1]+"/news",data:"item",title:"title",description:"description",image:"image",link:"link"},bbc:{id:"bbc",source:"http://feeds.bbci.co.uk/"+c[1]+"/rss.xml",data:"item",title:"title",description:"description",link:"link"}};$.get(f[c[0]].source).done(function(a){$(a).find(f[c[0]].data).each(function(){"ntv"==f[c[0]].id?(d=/\ src="(.*?)\?width/.exec($(this).find(f[c[0]].image).text())[1],e=$(this).find(f[c[0]].link).attr("href")):"cnn"==f[c[0]].id?(d=$(this).find(f[c[0]].image).text(),e=$(this).find(f[c[0]].link).text()):(d=$(this).find("media\\:thumbnail, thumbnail").attr("url"),e=$(this).find(f[c[0]].link).text()),b.push({s:c[0],i:d,t:$(this).find(f[c[0]].title).text().replace("<![CDATA[","").replace("]]>",""),d:$(this).find(f[c[0]].description).text().replace("<![CDATA[","").replace("]]>","").replace(/(<([^>]+)>)/gi,""),l:e})}),chrome.storage.local.set({a:JSON.stringify(b)})})})}function option(a,b){if("image-on"==a&&($(".background-image").css("background-image","url("+b+")"),$(".background-gradient").css("opacity","0.9")),"image-off"==a&&($(".background-image").css("background-image","none"),$(".background-gradient").css("opacity","1")),"color-on"==a&&$(".background-image").css("filter","none"),"color-off"==a&&$(".background-image").css("filter","grayscale(100%)"),"background-on"==a){var c=(new Date).getHours(),d={0:["#181f32","#8580a9"],1:["#181f32","#8580a9"],2:["#181f32","#8580a9"],3:["#181f32","#8580a9"],4:["#3a3654","#aa8ca5"],5:["#454c77","#cfc4d5"],6:["#6381aa","#e3c7c7"],7:["#6886b2","#bee3dd"],8:["#6886b2","#bee3dd"],9:["#6886b2","#bee3dd"],10:["#6886b2","#bee3dd"],11:["#6886b2","#bee3dd"],12:["#6886b2","#bee3dd"],13:["#6886b2","#bee3dd"],14:["#6886b2","#bee3dd"],15:["#6381aa","#c7cee3"],16:["#6381aa","#c7cee3"],17:["#625e85","#f9bbb7"],18:["#625e85","#f9bbb7"],19:["#625e85","#f9bbb7"],20:["#181f32","#8580a9"],21:["#181f32","#8580a9"],22:["#181f32","#8580a9"],23:["#181f32","#8580a9"]};$(".background-gradient").css("background-image","linear-gradient(-45deg, "+d[c][0]+", "+d[c][1]+")")}"background-off"==a&&$(".background-gradient").css({"background-image":"none","background-color":"#222"})}chrome.storage.local.get(function(a){if(void 0===a.a){$(".background-gradient").css("opacity","1");var b=[{t:"Eklentiyi yüklediğiniz için teşekkürler",d:"Eklentiyi ilk kez kullanacağınız için öncelikle bir haber kaynağı seçerek işe başlayabilirsiniz."}];$(".article footer").hide(),$(".source-options").show()}else{var b=JSON.parse(a.a);console.table(b)}var c=b[Math.floor(Math.random()*b.length)],d=a.o1,e=a.o2,f=a.o3,g=[["hur","gundem","Gündem"],["hur","dunya","Dünya"],["hur","ekonomi","Ekonomi"],["hur","spor","Spor"],["hur","saglik","Sağlık"],["hur","teknoloji","Teknoloji"],["hur","magazin","Magazin"],["hur","astroloji","Astroloji"],["ntv","gundem","Gündem"],["ntv","turkiye","Türkiye"],["ntv","dunya","Dünya"],["ntv","ekonomi","Ekonomi"],["ntv","spor","Spor"],["ntv","yasam","Yaşam"],["ntv","saglik","Sağlık"],["ntv","teknoloji","Teknoloji"],["ntv","emlak","Emlak"],["ntv","sanat","Sanat"],["ntv","egitim","Eğitim"],["cnn","all","Gündem"],["cnn","turkiye","Türkiye"],["cnn","dunya","Dünya"],["cnn","ekonomi","Ekonomi"],["cnn","spor","Spor"],["cnn","yasam","Yaşam"],["cnn","saglik","Sağlık"],["cnn","bilim-teknoloji","Bilim - Teknoloji"],["cnn","magazin","Magazin"],["cnn","kultur-sanat","Kültür Sanat"],["bbc","turkce","Türkçe"],["bbc","news/world","World (İngilizce)"]];$(".source-logo").attr("src","img/"+c.s+".png"),$(".article .title").append(c.t),$(".article .description").append(c.d),$(".article footer").append('<a class="read-more" href='+c.l+">Devamını Oku</a>"),$.each(g,function(a,b){$("."+b[0]).append('<div class="form-group"><input type="radio" name="options" id='+a+' value="'+b[0]+"#"+b[1]+'"><label for='+a+">"+b[2]+"</label></div>")}),$('.source-options input[value="'+a.s+'"]').prop("checked",!0),$(".source-options input").click(function(){$(this).is(":checked")&&($(".band .band-navigation ul li.saved").fadeIn("fast").delay(1500).fadeOut("fast"),chrome.storage.local.set({s:$(this).val()}),parse())}),void 0===d||1==d?option("image-on",c.i):option("image-off"),$('.options input[name="image"]').prop("checked",d),$('.options input[name="image"]').click(function(){$(this).is(":checked")?(option("image-on",c.i),chrome.storage.local.set({o1:!0})):(option("image-off"),chrome.storage.local.set({o1:!1}))}),option(void 0===e||0==e?"color-off":"color-on"),$('.options input[name="color"]').prop("checked",e),$('.options input[name="color"]').click(function(){$(this).is(":checked")?(option("color-on"),chrome.storage.local.set({o2:!0})):(option("color-off"),chrome.storage.local.set({o2:!1}))}),option(void 0===f||1==f?"background-on":"background-off"),$('.options input[name="background"]').prop("checked",f),$('.options input[name="background"]').click(function(){$(this).is(":checked")?(option("background-on"),chrome.storage.local.set({o3:!0})):(option("background-off"),chrome.storage.local.set({o3:!1}))})}),$(".source-logo").click(function(){$(".source-options").fadeIn(50)}),$(".options-button").click(function(){$(".options").fadeIn(50)}),$("body").click(function(a){"source-logo"!==a.target.className&&$(".source-options").fadeOut(50),"options-button"!==a.target.className&&$(".options").fadeOut(50)}),$(".band-logo").attr("title","Sürüm: "+chrome.runtime.getManifest().version);
